<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>تطبيق ذاتي تفاعلي</title>
<style>
  body {
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: #f0f4f8;
    margin: 0; padding: 0;
    direction: rtl;
    color: #333;
  }
  header {
    background-color: #4caf50;
    color: white;
    padding: 1rem;
    text-align: center;
  }
  main {
    max-width: 800px;
    margin: 1rem auto;
    background: white;
    padding: 1rem 2rem;
    border-radius: 8px;
    box-shadow: 0 0 10px #ccc;
  }
  h1, h2 {
    margin-top: 0;
  }
  button {
    background-color: #4caf50;
    color: white;
    border: none;
    padding: 0.6rem 1.2rem;
    margin: 0.5rem 0;
    font-size: 1rem;
    border-radius: 4px;
    cursor: pointer;
  }
  button:disabled {
    background-color: #9e9e9e;
    cursor: default;
  }
  .hidden {
    display: none;
  }
  .lesson-list button {
    display: block;
    width: 100%;
    text-align: right;
    margin-bottom: 0.5rem;
  }
  .progress-container {
    background-color: #ddd;
    border-radius: 20px;
    overflow: hidden;
    height: 20px;
    margin: 1rem 0;
  }
  .progress-bar {
    height: 100%;
    width: 0%;
    background-color: #4caf50;
    transition: width 0.3s ease;
  }
  .chat-box {
    border: 1px solid #ccc;
    height: 150px;
    overflow-y: auto;
    padding: 0.5rem;
    margin-top: 1rem;
    background: #f9f9f9;
  }
  .chat-input {
    width: 100%;
    padding: 0.5rem;
    margin-top: 0.5rem;
    border-radius: 4px;
    border: 1px solid #ccc;
  }
  .chat-message {
    margin-bottom: 0.5rem;
  }
  .chat-message.user {
    text-align: left;
    font-weight: bold;
    color: #2b7a78;
  }
  .chat-message.bot {
    text-align: right;
    color: #555;
  }
</style>
</head>
<body>

<header>
  <h1>تطبيق التعليم الذاتي التفاعلي</h1>
</header>

<main>

  <!-- شاشة الترحيب -->
  <section id="welcome-section">
    <h2>مرحبًا بك!</h2>
    <p>يرجى إدخال اسمك للبدء في التعلم:</p>
    <input type="text" id="userNameInput" placeholder="اسمك هنا" />
    <button id="startBtn">ابدأ التعلم</button>
  </section>

  <!-- شاشة الدروس -->
  <section id="lessons-section" class="hidden">
    <h2>قائمة الدروس</h2>
    <div class="lesson-list" id="lessonList"></div>
    <div class="progress-container" aria-label="شريط التقدم">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <button id="logoutBtn" style="background:#f44336;">تسجيل خروج</button>
  </section>

  <!-- شاشة الدرس -->
  <section id="lesson-section" class="hidden">
    <h2 id="lessonTitle"></h2>
    <p id="lessonContent"></p>
    <video id="lessonVideo" width="100%" controls class="hidden"></video>
    <button id="startQuizBtn">اختبار الدرس</button>
    <button id="backToLessonsBtn">رجوع لقائمة الدروس</button>
  </section>

  <!-- شاشة الاختبار -->
  <section id="quiz-section" class="hidden">
    <h2>اختبار: <span id="quizLessonTitle"></span></h2>
    <form id="quizForm"></form>
    <button id="submitQuizBtn">إرسال الإجابات</button>
    <button id="cancelQuizBtn">إلغاء الاختبار</button>
  </section>

  <!-- شاشة النتائج -->
  <section id="result-section" class="hidden">
    <h2>نتائج الاختبار</h2>
    <p id="resultText"></p>
    <button id="backToLessonsAfterQuizBtn">العودة إلى قائمة الدروس</button>
  </section>

  <!-- شاشة المساعد الذكي -->
  <section id="chatbot-section" class="hidden">
    <h2>المساعد الذكي</h2>
    <div class="chat-box" id="chatBox"></div>
    <input type="text" id="chatInput" class="chat-input" placeholder="اكتب سؤالك هنا..." />
    <button id="sendChatBtn">إرسال</button>
    <button id="closeChatBtn" style="background:#f44336;">إغلاق المساعد</button>
  </section>

  <button id="openChatBtn" style="position: fixed; bottom: 20px; left: 20px; background:#2196F3; color:#fff; border:none; border-radius:50%; width:60px; height:60px; font-size:28px; cursor:pointer;">💬</button>

</main>

<script>
  // بيانات الدروس
  const lessons = [
    {
      id: 1,
      title: "مقدمة في التفكير النقدي",
      content: "التفكير النقدي هو القدرة على تحليل المعلومات والأفكار بطريقة منهجية لتقييمها واتخاذ قرارات مدروسة.",
      video: "", // يمكنك إضافة رابط فيديو هنا إن أردت
      quiz: [
        {
          question: "ما هو التفكير النقدي؟",
          options: [
            "إعادة تكرار المعلومات بدون تحليل",
            "تحليل المعلومات بطريقة منهجية",
            "التجاهل وعدم الاهتمام",
            "الاعتماد فقط على الرأي الشخصي"
          ],
          answer: 1
        },
        {
          question: "لماذا التفكير النقدي مهم؟",
          options: [
            "لأنه يساعد في اتخاذ قرارات مدروسة",
            "لأنه يجعلنا نصدق كل شيء",
            "لأنه يعيق الإبداع",
            "لا أهمية له"
          ],
          answer: 0
        }
      ]
    },
    {
      id: 2,
      title: "تنظيم الوقت بفعالية",
      content: "تنظيم الوقت هو مهارة تساعدك على إدارة وقتك بشكل يجعل يومك أكثر إنتاجية.",
      video: "",
      quiz: [
        {
          question: "ما هي أفضل طريقة لتنظيم الوقت؟",
          options: [
            "تأجيل المهام",
            "تحديد أولويات المهام",
            "عدم التخطيط",
            "القيام بكل شيء دفعة واحدة"
          ],
          answer: 1
        }
      ]
    }
  ];

  let userName = "";
  let completedLessons = [];
  let currentLesson = null;

  // اختيار العناصر
  const welcomeSection = document.getElementById("welcome-section");
  const lessonsSection = document.getElementById("lessons-section");
  const lessonSection = document.getElementById("lesson-section");
  const quizSection = document.getElementById("quiz-section");
  const resultSection = document.getElementById("result-section");
  const chatbotSection = document.getElementById("chatbot-section");

  const userNameInput = document.getElementById("userNameInput");
  const startBtn = document.getElementById("startBtn");
  const lessonList = document.getElementById("lessonList");
  const progressBar = document.getElementById("progressBar");
  const logoutBtn = document.getElementById("logoutBtn");

  const lessonTitle = document.getElementById("lessonTitle");
  const lessonContent = document.getElementById("lessonContent");
  const lessonVideo = document.getElementById("lessonVideo");
  const startQuizBtn = document.getElementById("startQuizBtn");
  const backToLessonsBtn = document.getElementById("backToLessonsBtn");

  const quizLessonTitle = document.getElementById("quizLessonTitle");
  const quizForm = document.getElementById("quizForm");
  const submitQuizBtn = document.getElementById("submitQuizBtn");
  const cancelQuizBtn = document.getElementById("cancelQuizBtn");

  const resultText = document.getElementById("resultText");
  const backToLessonsAfterQuizBtn = document.getElementById("backToLessonsAfterQuizBtn");

  const openChatBtn = document.getElementById("openChatBtn");
