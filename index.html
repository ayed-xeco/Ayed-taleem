<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>تطبيق ذاتك - التعليم الذاتي التفاعلي</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: auto;
      padding: 10px;
      background: #f4f4f4;
      color: #333;
    }
    h1, h2 {
      text-align: center;
      color: #005a87;
    }
    button {
      background-color: #005a87;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 10px 5px;
      cursor: pointer;
      border-radius: 5px;
      font-size: 16px;
      transition: background-color 0.3s;
    }
    button:hover:not(:disabled) {
      background-color: #003f5c;
    }
    button:disabled {
      background-color: #aaa;
      cursor: default;
    }
    .hidden {
      display: none;
    }
    #lessons-list button {
      display: block;
      width: 100%;
      margin-bottom: 10px;
      text-align: right;
      padding: 15px;
      font-size: 18px;
      background-color: #009688;
    }
    #lessons-list button:hover {
      background-color: #00675b;
    }
    #video-container {
      text-align: center;
      margin: 15px 0;
    }
    iframe {
      width: 100%;
      height: 250px;
      border: none;
      border-radius: 8px;
    }
    #test-answers button {
      width: 100%;
      margin: 8px 0;
      font-size: 16px;
      padding: 12px;
    }
    #chatbot {
      margin-top: 20px;
      border: 1px solid #ccc;
      background: white;
      padding: 10px;
      border-radius: 5px;
      max-height: 200px;
      overflow-y: auto;
      font-size: 14px;
    }
    #chatbot p {
      margin: 5px 0;
    }
    #chatbot .bot {
      color: #00796b;
    }
    #chatbot .user {
      text-align: right;
      color: #555;
    }
    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
    }
  </style>
</head>
<body>

<!-- شاشة الترحيب -->
<div id="welcome-screen">
  <h1>مرحباً بك في تطبيق ذاتك</h1>
  <p>من فضلك اكتب اسمك للبدء:</p>
  <input type="text" id="student-name" placeholder="اسم الطالب" />
  <button onclick="startApp()">ابدأ</button>
</div>

<!-- الشاشة الرئيسية - قائمة الدروس -->
<div id="main-menu" class="hidden">
  <h2>مرحباً، <span id="display-name"></span></h2>
  <h3>اختر الدرس:</h3>
  <div id="lessons-list">
    <button onclick="openLesson(0)">الدرس الأول: مقدمة في التفكير النقدي</button>
    <button onclick="openLesson(1)">الدرس الثاني: التمييز بين الحقائق والآراء</button>
    <button onclick="openLesson(2)">الدرس الثالث: التفكير المنطقي وتحليل الحجج</button>
    <button onclick="openLesson(3)">الدرس الرابع: كشف المغالطات المنطقية</button>
    <button onclick="openLesson(4)">الدرس الخامس: اتخاذ القرار المستند إلى الأدلة</button>
  </div>
  <button onclick="openTests()">الاختبارات</button>
</div>

<!-- شاشة الدرس -->
<div id="lesson-screen" class="hidden">
  <button onclick="backToMenu()">⬅ العودة إلى القائمة الرئيسية</button>
  <h2 id="lesson-title"></h2>
  <div id="video-container">
    <iframe id="lesson-video" src="" allowfullscreen></iframe>
  </div>
  <p id="lesson-content"></p>
</div>

<!-- شاشة الاختبار -->
<div id="tests-screen" class="hidden">
  <h2>اختبار مهارات التفكير النقدي</h2>
  <p id="test-question"></p>
  <div id="test-answers"></div>
  <button id="next-question-btn" onclick="nextQuestion()">التالي</button>
  <button id="finish-test-btn" class="hidden" onclick="finishTest()">إنهاء الاختبار</button>
  <button onclick="backToMenu()">⬅ العودة إلى القائمة الرئيسية</button>
</div>

<!-- شاشة النتائج -->
<div id="results-screen" class="hidden">
  <h2>نتائج الاختبار</h2>
  <p id="score-text"></p>
  <button onclick="backToMenu()">⬅ العودة إلى القائمة الرئيسية</button>
</div>

<script>
  // بيانات الدروس (العناوين، محتوى مختصر، وروابط فيديو اليوتيوب)
  const lessons = [
    {
      title: "مقدمة في التفكير النقدي",
      content: "في هذا الدرس سنتعرف على مفهوم التفكير النقدي وأهميته في حياتنا اليومية.",
      video: "https://www.youtube.com/embed/BMGgz2fElto"
    },
    {
      title: "التمييز بين الحقائق والآراء",
      content: "سنتعلم كيف نميز بين الحقائق التي يمكن التحقق منها والآراء التي تعتمد على وجهات نظر شخصية.",
      video: "https://www.youtube.com/embed/0Qpyp9tc2RI"
    },
    {
      title: "التفكير المنطقي وتحليل الحجج",
      content: "نتعرف على كيفية استخدام التفكير المنطقي لتحليل الحجج والتمييز بين الصواب والخطأ.",
      video: "https://www.youtube.com/embed/TA0vriGmhhI"
    },
    {
      title: "كشف المغالطات المنطقية",
      content: "سنستعرض أبرز أنواع المغالطات المنطقية وكيفية كشفها لتجنب الوقوع فيها.",
      video: "https://www.youtube.com/embed/lQ3hh7wvpIA"
    },
    {
      title: "اتخاذ القرار المستند إلى الأدلة",
      content: "كيفية اتخاذ قرارات سليمة بناءً على الأدلة والمعلومات الموثوقة.",
      video: "https://www.youtube.com/embed/7nTKrXiRJPM"
    }
  ];

  // بيانات أسئلة الاختبار (10 أسئلة، 2 لكل درس)
  const testQuestions = [
    // درس 1
    {
      question: "ما هو التفكير النقدي؟",
      answers: [
        { text: "اتخاذ قرارات عشوائية", correct: false },
        { text: "تحليل المعلومات بشكل منطقي", correct: true },
        { text: "اتباع آراء الآخرين بدون تفكير", correct: false },
      ]
    },
    {
      question: "لماذا التفكير النقدي مهم؟",
      answers: [
        { text: "لمساعدتك على اتخاذ قرارات سليمة", correct: true },
        { text: "لتجنب التفكير", correct: false },
        { text: "لتعقيد الأمور", correct: false },
      ]
    },
    // درس 2
    {
      question: "كيف تميز بين الحقيقة والرأي؟",
      answers: [
        { text: "باستخدام الأدلة والتحقق", correct: true },
        { text: "باختيار ما يعجبك فقط", correct: false },
        { text: "الاعتماد على الشائعات", correct: false },
      ]
    },
    {
      question: "أي من التالي يعتبر حقيقة؟",
      answers: [
        { text: "السماء زرقاء في يوم صافٍ", correct: true },
        { text: "أحب اللون الأزرق", correct: false },
        { text: "الجو جميل اليوم", correct: false },
      ]
    },
    // درس 3
    {
      question: "ما هو الهدف من التفكير المنطقي؟",
      answers: [
        { text: "تحليل الحجج بموضوعية", correct: true },
        { text: "إعطاء رأي بدون دليل", correct: false },
        { text: "الإقناع بالعواطف فقط", correct: false },
      ]
    },
    {
      question: "ما هو تحليل الحجة؟",
      answers: [
        { text: "فهم الأدلة لدعم الفكرة", correct: true },
        { text: "تجاهل الأدلة", correct: false },
        { text: "استخدام المغالطات", correct: false },
      ]
    },
    // درس 4
    {
      question: "ما هي المغالطة المنطقية؟",
      answers: [
        { text: "خطأ في التفكير أو الحجة", correct: true },
        { text: "حقيقة مثبتة", correct: false },
        { text: "رأي شخص
