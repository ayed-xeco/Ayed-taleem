<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ØªØ·Ø¨ÙŠÙ‚ Ø°Ø§ØªÙŠ ØªÙØ§Ø¹Ù„ÙŠ</title>
<style>
  body {
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: #f0f4f8;
    margin: 0; padding: 0;
    direction: rtl;
    color: #333;
  }
  header {
    background-color: #4caf50;
    color: white;
    padding: 1rem;
    text-align: center;
  }
  main {
    max-width: 800px;
    margin: 1rem auto;
    background: white;
    padding: 1rem 2rem;
    border-radius: 8px;
    box-shadow: 0 0 10px #ccc;
  }
  h1, h2 {
    margin-top: 0;
  }
  button {
    background-color: #4caf50;
    color: white;
    border: none;
    padding: 0.6rem 1.2rem;
    margin: 0.5rem 0;
    font-size: 1rem;
    border-radius: 4px;
    cursor: pointer;
  }
  button:disabled {
    background-color: #9e9e9e;
    cursor: default;
  }
  .hidden {
    display: none;
  }
  .lesson-list button {
    display: block;
    width: 100%;
    text-align: right;
    margin-bottom: 0.5rem;
  }
  .progress-container {
    background-color: #ddd;
    border-radius: 20px;
    overflow: hidden;
    height: 20px;
    margin: 1rem 0;
  }
  .progress-bar {
    height: 100%;
    width: 0%;
    background-color: #4caf50;
    transition: width 0.3s ease;
  }
  .chat-box {
    border: 1px solid #ccc;
    height: 150px;
    overflow-y: auto;
    padding: 0.5rem;
    margin-top: 1rem;
    background: #f9f9f9;
  }
  .chat-input {
    width: 100%;
    padding: 0.5rem;
    margin-top: 0.5rem;
    border-radius: 4px;
    border: 1px solid #ccc;
  }
  .chat-message {
    margin-bottom: 0.5rem;
  }
  .chat-message.user {
    text-align: left;
    font-weight: bold;
    color: #2b7a78;
  }
  .chat-message.bot {
    text-align: right;
    color: #555;
  }
</style>
</head>
<body>

<header>
  <h1>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø°Ø§ØªÙŠ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ</h1>
</header>

<main>

  <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
  <section id="welcome-section">
    <h2>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ!</h2>
    <p>ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ù„Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„ØªØ¹Ù„Ù…:</p>
    <input type="text" id="userNameInput" placeholder="Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§" />
    <button id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¹Ù„Ù…</button>
  </section>

  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø±ÙˆØ³ -->
  <section id="lessons-section" class="hidden">
    <h2>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³</h2>
    <div class="lesson-list" id="lessonList"></div>
    <div class="progress-container" aria-label="Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…">
      <div class="progress-bar" id="progressBar"></div>
    </div>
    <button id="logoutBtn" style="background:#f44336;">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
  </section>

  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø±Ø³ -->
  <section id="lesson-section" class="hidden">
    <h2 id="lessonTitle"></h2>
    <p id="lessonContent"></p>
    <video id="lessonVideo" width="100%" controls class="hidden"></video>
    <button id="startQuizBtn">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¯Ø±Ø³</button>
    <button id="backToLessonsBtn">Ø±Ø¬ÙˆØ¹ Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³</button>
  </section>

  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
  <section id="quiz-section" class="hidden">
    <h2>Ø§Ø®ØªØ¨Ø§Ø±: <span id="quizLessonTitle"></span></h2>
    <form id="quizForm"></form>
    <button id="submitQuizBtn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>
    <button id="cancelQuizBtn">Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
  </section>

  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
  <section id="result-section" class="hidden">
    <h2>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
    <p id="resultText"></p>
    <button id="backToLessonsAfterQuizBtn">Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¯Ø±ÙˆØ³</button>
  </section>

  <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ -->
  <section id="chatbot-section" class="hidden">
    <h2>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</h2>
    <div class="chat-box" id="chatBox"></div>
    <input type="text" id="chatInput" class="chat-input" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..." />
    <button id="sendChatBtn">Ø¥Ø±Ø³Ø§Ù„</button>
    <button id="closeChatBtn" style="background:#f44336;">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯</button>
  </section>

  <button id="openChatBtn" style="position: fixed; bottom: 20px; left: 20px; background:#2196F3; color:#fff; border:none; border-radius:50%; width:60px; height:60px; font-size:28px; cursor:pointer;">ğŸ’¬</button>

</main>

<script>
  // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø±ÙˆØ³
  const lessons = [
    {
      id: 1,
      title: "Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù†Ù‚Ø¯ÙŠ",
      content: "Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù†Ù‚Ø¯ÙŠ Ù‡Ùˆ Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙˆØ§Ù„Ø£ÙÙƒØ§Ø± Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù†Ù‡Ø¬ÙŠØ© Ù„ØªÙ‚ÙŠÙŠÙ…Ù‡Ø§ ÙˆØ§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ù…Ø¯Ø±ÙˆØ³Ø©.",
      video: "", // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ Ù‡Ù†Ø§ Ø¥Ù† Ø£Ø±Ø¯Øª
      quiz: [
        {
          question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù†Ù‚Ø¯ÙŠØŸ",
          options: [
            "Ø¥Ø¹Ø§Ø¯Ø© ØªÙƒØ±Ø§Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø¯ÙˆÙ† ØªØ­Ù„ÙŠÙ„",
            "ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ù†Ù‡Ø¬ÙŠØ©",
            "Ø§Ù„ØªØ¬Ø§Ù‡Ù„ ÙˆØ¹Ø¯Ù… Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù…",
            "Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø£ÙŠ Ø§Ù„Ø´Ø®ØµÙŠ"
          ],
          answer: 1
        },
        {
          question: "Ù„Ù…Ø§Ø°Ø§ Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù†Ù‚Ø¯ÙŠ Ù…Ù‡Ù…ØŸ",
          options: [
            "Ù„Ø£Ù†Ù‡ ÙŠØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±Ø§Øª Ù…Ø¯Ø±ÙˆØ³Ø©",
            "Ù„Ø£Ù†Ù‡ ÙŠØ¬Ø¹Ù„Ù†Ø§ Ù†ØµØ¯Ù‚ ÙƒÙ„ Ø´ÙŠØ¡",
            "Ù„Ø£Ù†Ù‡ ÙŠØ¹ÙŠÙ‚ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹",
            "Ù„Ø§ Ø£Ù‡Ù…ÙŠØ© Ù„Ù‡"
          ],
          answer: 0
        }
      ]
    },
    {
      id: 2,
      title: "ØªÙ†Ø¸ÙŠÙ… Ø§Ù„ÙˆÙ‚Øª Ø¨ÙØ¹Ø§Ù„ÙŠØ©",
      content: "ØªÙ†Ø¸ÙŠÙ… Ø§Ù„ÙˆÙ‚Øª Ù‡Ùˆ Ù…Ù‡Ø§Ø±Ø© ØªØ³Ø§Ø¹Ø¯Ùƒ Ø¹Ù„Ù‰ Ø¥Ø¯Ø§Ø±Ø© ÙˆÙ‚ØªÙƒ Ø¨Ø´ÙƒÙ„ ÙŠØ¬Ø¹Ù„ ÙŠÙˆÙ…Ùƒ Ø£ÙƒØ«Ø± Ø¥Ù†ØªØ§Ø¬ÙŠØ©.",
      video: "",
      quiz: [
        {
          question: "Ù…Ø§ Ù‡ÙŠ Ø£ÙØ¶Ù„ Ø·Ø±ÙŠÙ‚Ø© Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„ÙˆÙ‚ØªØŸ",
          options: [
            "ØªØ£Ø¬ÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…",
            "ØªØ­Ø¯ÙŠØ¯ Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ù…Ù‡Ø§Ù…",
            "Ø¹Ø¯Ù… Ø§Ù„ØªØ®Ø·ÙŠØ·",
            "Ø§Ù„Ù‚ÙŠØ§Ù… Ø¨ÙƒÙ„ Ø´ÙŠØ¡ Ø¯ÙØ¹Ø© ÙˆØ§Ø­Ø¯Ø©"
          ],
          answer: 1
        }
      ]
    }
  ];

  let userName = "";
  let completedLessons = [];
  let currentLesson = null;

  // Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ù†Ø§ØµØ±
  const welcomeSection = document.getElementById("welcome-section");
  const lessonsSection = document.getElementById("lessons-section");
  const lessonSection = document.getElementById("lesson-section");
  const quizSection = document.getElementById("quiz-section");
  const resultSection = document.getElementById("result-section");
  const chatbotSection = document.getElementById("chatbot-section");

  const userNameInput = document.getElementById("userNameInput");
  const startBtn = document.getElementById("startBtn");
  const lessonList = document.getElementById("lessonList");
  const progressBar = document.getElementById("progressBar");
  const logoutBtn = document.getElementById("logoutBtn");

  const lessonTitle = document.getElementById("lessonTitle");
  const lessonContent = document.getElementById("lessonContent");
  const lessonVideo = document.getElementById("lessonVideo");
  const startQuizBtn = document.getElementById("startQuizBtn");
  const backToLessonsBtn = document.getElementById("backToLessonsBtn");

  const quizLessonTitle = document.getElementById("quizLessonTitle");
  const quizForm = document.getElementById("quizForm");
  const submitQuizBtn = document.getElementById("submitQuizBtn");
  const cancelQuizBtn = document.getElementById("cancelQuizBtn");

  const resultText = document.getElementById("resultText");
  const backToLessonsAfterQuizBtn = document.getElementById("backToLessonsAfterQuizBtn");

  const openChatBtn = document.getElementById("openChatBtn");
